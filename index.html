# Maa≈ü Hesaplama ve Hesap Makinesi

<!-- Maa≈ü Hesaplama -->
<div id="menu2" class="menu">
    <h2>Maa≈ü Hesaplama</h2>
    <button onclick="calculateSalaryDays()">Maa≈üa Kalan G√ºn</button>
    <div id="remainingDays" class="result"></div>
    <input type="number" id="divideNumber" placeholder="B√∂lenecek miktar">
    <button onclick="divideAmount()">B√∂l</button>
    <div id="divisionResult" class="result"></div>
</div>

<!-- Hesap Makinesi -->
<div id="menu3" class="menu">
    <h2>Hesap Makinesi</h2>
    <div class="calculator">
        <input type="text" id="display" readonly>
        <button onclick="clearCalculator()">C</button>
        <button onclick="appendNumber(7)">7</button>
        <button onclick="appendNumber(8)">8</button>
        <button onclick="appendNumber(9)">9</button>
        <button onclick="appendOperator('/')">/</button>
        <button onclick="appendNumber(4)">4</button>
        <button onclick="appendNumber(5)">5</button>
        <button onclick="appendNumber(6)">6</button>
        <button onclick="appendOperator('*')">√ó</button>
        <button onclick="appendNumber(1)">1</button>
        <button onclick="appendNumber(2)">2</button>
        <button onclick="appendNumber(3)">3</button>
        <button onclick="appendOperator('-')">-</button>
        <button onclick="appendNumber(0)">0</button>
        <button onclick="appendNumber('.')">.</button>
        <button onclick="calculate()">=</button>
        <button onclick="appendOperator('+')">+</button>
    </div>
</div>

<!-- Tarih Se√ßici -->
<div id="datePickerMenu" class="menu">
    <h2>Tarih Se√ßici</h2>
    <input type="date" id="selectedDate">
    <button onclick="calculateDays()">Hesapla</button>
    <div id="daysResult" class="result"></div>
</div>

<!-- Alt Navigasyon -->
<div class="nav">
    <button class="nav-button active" onclick="switchMenu(1)">
        üïå<br>Namaz
    </button>
    <button class="nav-button" onclick="switchMenu(2)">
        üí∞<br>Maa≈ü
    </button>
    <button class="nav-button" onclick="switchMenu(3)">
        üî¢<br>Hesap
    </button>
</div>

<script>
    // Service Worker kaydƒ±
    if ('serviceWorker' in navigator) {
        navigator.serviceWorker.register('sw.js');
    }

    // Namaz detaylarƒ±
    const prayerDetails = {
        Fajr: {
            sunnet: 2,
            farz: 2,
            description: "2 rekat s√ºnnet, 2 rekat farz"
        },
        Sunrise: {
            description: "G√ºne≈ü doƒüu≈ü vakti"
        },
        Dhuhr: {
            sunnet: "4+4",
            farz: 4,
            description: "4 rekat ilk s√ºnnet, 4 rekat farz, 4 rekat son s√ºnnet"
        },
        Asr: {
            sunnet: 4,
            farz: 4,
            description: "4 rekat s√ºnnet, 4 rekat farz"
        },
        Maghrib: {
            sunnet: 2,
            farz: 3,
            description: "3 rekat farz, 2 rekat s√ºnnet"
        },
        Isha: {
            sunnet: "4+2",
            farz: 4,
            description: "4 rekat ilk s√ºnnet, 4 rekat farz, 2 rekat son s√ºnnet"
        }
    };

    // Men√º deƒüi≈ütirme
    function switchMenu(menuNumber) {
        document.querySelectorAll('.menu').forEach(menu => menu.classList.remove('active'));
        document.querySelectorAll('.nav-button').forEach(btn => btn.classList.remove('active'));
        document.getElementById('menu' + menuNumber).classList.add('active');
        document.querySelectorAll('.nav-button')[menuNumber-1].classList.add('active');
    }

    function toggleDetails(prayerKey) {
        const detailsElement = document.getElementById(`details-${prayerKey}`);
        document.querySelectorAll('.prayer-details').forEach(el => {
            if (el !== detailsElement) el.classList.remove('active');
        });
        detailsElement.classList.toggle('active');
    }

    // Namaz vakitleri
    async function getPrayerTimes() {
        try {
            const cached = localStorage.getItem('prayerTimes');
            const cachedDate = localStorage.getItem('prayerTimesDate');
            
            if (cached && cachedDate === new Date().toDateString()) {
                displayPrayerTimes(JSON.parse(cached));
                return;
            }

            const response = await fetch('https://api.aladhan.com/v1/timingsByCity?city=Samsun&country=Turkey&method=13');
            const data = await response.json();
            localStorage.setItem('prayerTimes', JSON.stringify(data.data.timings));
            localStorage.setItem('prayerTimesDate', new Date().toDateString());
            displayPrayerTimes(data.data.timings);
        } catch (error) {
            console.error('Namaz vakitleri alƒ±namadƒ±');
        }
    }

    function displayPrayerTimes(timings) {
        const container = document.getElementById('prayerTimes');
        const prayers = {
            Fajr: 'ƒ∞msak',
            Sunrise: 'G√ºne≈ü',
            Dhuhr: '√ñƒüle',
            Asr: 'ƒ∞kindi',
            Maghrib: 'Ak≈üam',
            Isha: 'Yatsƒ±'
        };

        container.innerHTML = Object.entries(prayers)
            .map(([key, name]) => `
                <div class="prayer-item">
                    <div class="prayer-name-container">
                        <span>${name}</span>
                        ${key !== 'Sunrise' ? `
                            <button class="details-button" onclick="toggleDetails('${key}')">
                                Detaylar
                            </button>
                        ` : ''}
                    </div>
                    <span>${timings[key]}</span>
                    ${key !== 'Sunrise' ? `
                        <div id="details-${key}" class="prayer-details">
                            ${prayerDetails[key].description}
                        </div>
                    ` : ''}
                </div>
            `).join('');
    }

    // Maa≈ü hesaplama
    let remainingDaysValue = 0;
    const salaryDay = 18;

    function calculateSalaryDays() {
        const today = new Date();
        const nextSalaryDate = new Date(today.getFullYear(), today.getMonth(), salaryDay);
        
        if (today.getDate() > salaryDay) {
            nextSalaryDate.setMonth(nextSalaryDate.getMonth() + 1);
        }

        const diffTime = nextSalaryDate - today;
        remainingDaysValue = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
        
        document.getElementById('remainingDays').textContent = 
            `Maa≈ü g√ºn√ºne ${remainingDaysValue} g√ºn kaldƒ±`;
    }

    function divideAmount() {
        const amount = document.getElementById('divideNumber').value;
        if (!amount || remainingDaysValue <= 0) return;
        
        const daily = amount / remainingDaysValue;
        document.getElementById('divisionResult').textContent = 
            `G√ºnl√ºk: ${daily.toFixed(2)} TL`;
    }

    // Hesap makinesi
    let currentCalculation = '';
    const display = document.getElementById('display');

    function appendNumber(num) {
        currentCalculation += num;
        display.value = currentCalculation;
    }

    function appendOperator(op) {
        if (currentCalculation && !'+-*/'.includes(currentCalculation.slice(-1))) {
            currentCalculation += op;
            display.value = currentCalculation;
        }
    }

    function clearCalculator() {
        currentCalculation = '';
        display.value = '';
    }

    function calculate() {
        try {
            const result = eval(currentCalculation);
            display.value = result;
            currentCalculation = result.toString();
        } catch {
            display.value = 'Hata';
            currentCalculation = '';
        }
    }

    // Se√ßilen tarihten ge√ßen g√ºn sayƒ±sƒ±nƒ± hesaplama
    function calculateDays() {
        const selectedDate = new Date(document.getElementById('selectedDate').value);
        const today = new Date();
        const diffTime = today - selectedDate;
        const daysPassed = Math.floor(diffTime / (1000 * 60 * 60 * 24));
        const totalAmount = daysPassed * 275;

        document.getElementById('daysResult').textContent = 
            `Ge√ßen g√ºn sayƒ±sƒ±: ${daysPassed}, Toplam: ${totalAmount} TL`;
    }

    // Sayfa y√ºklendiƒüinde
    window.onload = getPrayerTimes;
</script>
